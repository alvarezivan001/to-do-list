(()=>{"use strict";class e{constructor(e=""){this._title=e,this._items=[]}get title(){return this._title}addItem(e={}){this._items.push(e)}removeItem(e=""){var t=this._items.findIndex((t=>t.name==e));this._items.splice(t,1)}get items(){return this._items}set items(e){this._items=e}}class t{constructor(e="",t="",o="",s=""){this._name=e,this._details=t,this._dueDate=o,this._priority=s}get name(){return this._name}get details(){return this._details}get dueDate(){return this._dueDate}get priority(){return this._priority}set name(e=""){this._name=e}set dueDate(e=""){this._dueDate=e}set details(e=""){this._details=e}set priority(e=""){this._priority=e}}class o{constructor(){this._notes=[]}get notes(){return this._notes}returnNote(e=-1){return this._notes[e]}addNote(e=""){this._notes.push(e)}removeNote(e=-1){this._notes.splice(e,1)}changeDetails(e=-1,t=""){this._notes[e]=t}}class s{loadNoteIntoMain(e=""){}loadProjectIntoPanel(t=new e){if("Default"==t.title){let e=document.getElementById("newProject");console.log(e);let o=`<button class="project" type="button" id="${t.title}">\n                      <span>${t.title}</span>\n                      </button>`;console.log(o),e.insertAdjacentHTML("beforebegin",o),console.log(e)}else{let e=document.getElementById("newProject");console.log(e);let o=`<button class="project" type="button" id="${t.title}">\n                    <span>${t.title}</span>\n                            <div class="projectDelete">\n                                    x\n                            </div>\n                </button>`;console.log(o),e.insertAdjacentHTML("beforebegin",o)}}loadProjNameIntoMain(e=""){document.getElementById("projectHeader").textContent=e}loadItemIntoMain(e=new t){document.getElementById("newItem").insertAdjacentHTML("beforebegin",`<li class="projectItem">\n                              <div class="priority ${e.priority}"></div>\n                              <div class="itemTitle" contenteditable="true">${e.name}</div>\n                              <input class="dueDate" type="date" value="${e.dueDate}">\n                              <div class="details" contenteditable="true">${e.details}</div>\n                              <button type="button" class="delete">x</button>\n                        </li>`)}addNewNote(){}displayNewItemPrompt(){document.getElementById("itemPrompt").style.display="block"}hideNewItemPrompt(){document.getElementById("itemPrompt").style.display="none"}clearItemPromptFields(){document.getElementById("itemPromptForm").reset();let e=document.getElementById("newDueDate"),t=new Date,o=t.getUTCMonth()+1;o<10&&(o="0"+o.toString());let s=t.getUTCDate(),i=t.getUTCFullYear()+"-"+o+"-"+s;e.value=i}displayNewProjPrompt(){const e=document.getElementById("projectName");document.getElementById("projectButtonContainer").style.display="block",e.style.display="block"}hideNewProjPrompt(){const e=document.getElementById("projectName");document.getElementById("projectButtonContainer").style.display="none",e.style.display="none"}clearProjPromptFields(){document.getElementById("projectName").value=""}getNewItemName(){return document.getElementById("newItemName").value}getNewItemDetails(){return document.getElementById("newDetails").value}getNewItemPriority(){return document.getElementById("newPriority").value}getNewItemDueDate(){return document.getElementById("newDueDate").value}getProjectName(){return document.getElementById("projectHeader").textContent}getNewProjName(){return document.getElementById("projectName").value}}class i{}(new class{constructor(){this.allProjects=[],this.allNotes=new o,this.dom=new s,this.utilites=new i}initHomePage(){this.initialProjects(),this.initialItems(),this.initialNotes(),this.initNewProjButtons(),this.initNewItemButtons(),this.isStoragePopulated(),this.loadAllProjects(),this.loadAllItemsOfProj(this.getProject("Default")),this.setnewItemDate()}initialProjects(){this.allProjects.push(new e("Default")),this.allProjects.push(new e("Chores"))}initialItems(){this.getProject("Default").addItem(new t("Example Item","This Item is editable","2000-01-01","low")),this.getProject("Default").addItem(new t("Email Gary","Discuss project M changes","2023-08-01","high")),this.getProject("Default").addItem(new t("Walk Pickles","","2023-08-07","medium")),this.getProject("Chores").addItem(new t("Fix PC","Order parts from Amazon","2023-09-01","high")),this.getProject("Chores").addItem(new t("Wash Dishes","from last nights party","2023-08-07","low")),console.log(this.allProjects)}initialNotes(){this.allNotes.addNote("This is an example note!"),this.allNotes.addNote("This content is editable")}isStoragePopulated(){localStorage.getItem("allProjects")?this.populateAllProjects():this.populateStorage()}populateStorage(){localStorage.setItem("allProjects",JSON.stringify(this.allProjects))}populateAllProjects(){let o=JSON.parse(localStorage.getItem("allProjects"));this.allProjects=[],o.forEach((o=>{let s=new e(o._title);o._items.length>0&&o._items.forEach((e=>{let o=new t(e._name,e._details,e._dueDate,e._priority);s.addItem(o)})),this.allProjects.push(s)})),console.log(this.allProjects)}getProject(e=""){return this.allProjects.find((t=>t.title==e))}loadAllProjects(){this.allProjects.forEach((e=>{this.dom.loadProjectIntoPanel(e)})),this.initAllProjectButtons(),this.initAllProjDelButtons(),this.printProjects()}loadAllItemsOfProj(t=new e){this.dom.loadProjNameIntoMain(t.title),t.items.forEach((e=>{this.dom.loadItemIntoMain(e)})),this.initAllItemDelButtons(),this.initEditableItemListeners(),this.printItems()}loadAllNotes(){}setnewItemDate(){let e=document.getElementById("newDueDate"),t=new Date,o=t.getUTCMonth()+1;o<10&&(o="0"+o.toString());let s=t.getUTCDate(),i=t.getUTCFullYear()+"-"+o+"-"+s;e.value=i}removeAllProjects(){document.querySelectorAll(".project").forEach((e=>e.remove()))}removeAllItemsOfProj(){document.querySelectorAll(".projectItem").forEach((e=>e.remove()))}removeAllNotes(){}initAllProjDelButtons(){document.querySelectorAll(".projectDelete").forEach((e=>e.addEventListener("click",(()=>{this.removeProject(e.parentNode.getElementsByTagName("span")[0].textContent)}))))}initAllItemDelButtons(){document.querySelectorAll(".delete").forEach((e=>e.addEventListener("click",(()=>{this.removeItem(e.parentNode.getElementsByClassName("itemTitle")[0])}))))}initNewItemButtons(){const e=document.getElementById("newItemButton"),t=document.getElementById("itemCancel"),o=document.getElementById("itemEnter");e.addEventListener("click",(()=>{this.dom.displayNewItemPrompt()})),t.addEventListener("click",(()=>{this.dom.hideNewItemPrompt(),this.dom.clearItemPromptFields()})),o.addEventListener("click",(()=>{this.submitNewItem(),this.dom.hideNewItemPrompt(),this.dom.clearItemPromptFields()}))}initNewProjButtons(){const e=document.getElementById("newProject"),t=document.getElementById("projectCancel"),o=document.getElementById("projectEnter");e.addEventListener("click",(()=>{this.dom.displayNewProjPrompt()})),t.addEventListener("click",(()=>{this.dom.hideNewProjPrompt(),this.dom.clearProjPromptFields()})),o.addEventListener("click",(()=>{this.submitNewProject(),this.dom.hideNewProjPrompt(),this.dom.clearProjPromptFields()}))}submitNewItem(){this.getProject(this.dom.getProjectName()).addItem(new t(this.dom.getNewItemName(),this.dom.getNewItemDetails(),this.dom.getNewItemDueDate(),this.dom.getNewItemPriority())),this.removeAllItemsOfProj(),this.loadAllItemsOfProj(this.getProject(this.dom.getProjectName())),this.populateStorage()}submitNewProject(){this.allProjects.push(new e(this.dom.getNewProjName())),this.removeAllProjects(),this.loadAllProjects(),this.populateStorage()}removeProject(e=""){var t=this.allProjects.findIndex((t=>t.title==e));this.allProjects.splice(t,1),this.removeAllProjects(),this.loadAllProjects(),this.populateStorage()}removeItem(e){var t=document.getElementById("projectHeader").textContent,o=this.getProject(t);o.removeItem(e.textContent),this.removeAllItemsOfProj(),this.loadAllItemsOfProj(o),this.populateStorage()}initAllProjectButtons(){document.querySelectorAll(".project").forEach((e=>e.addEventListener("click",(()=>{this.switchProjects(e.getElementsByTagName("span")[0].textContent)}))))}switchProjects(e){let t=this.getProject(e);this.removeAllItemsOfProj(),this.loadAllItemsOfProj(t)}initEditableItemListeners(){const e=document.querySelectorAll(".itemTitle"),t=document.querySelectorAll(".details"),o=document.querySelectorAll(".dueDate");e.forEach((e=>e.addEventListener("input",(()=>{this.editItem(e,"title"),this.populateStorage()})))),t.forEach((e=>e.addEventListener("input",(()=>{this.editItem(e,"deets"),this.populateStorage()})))),o.forEach((e=>e.addEventListener("input",(()=>{this.editItem(e,"dueDate"),this.populateStorage()}))))}editItem(e,t){var o=document.getElementById("projectHeader").textContent,s=this.getProject(o),i=e.parentNode,l=document.getElementById("itemsList"),n=Array.from(l.children).indexOf(i);"title"==t?(s.items[n].name=e.textContent,console.log(s.items[n].name)):"deets"==t?(s.items[n].details=e.textContent,console.log(s.items[n].details)):(s.items[n].dueDate=e.value,console.log(s.items[n].dueDate))}printProjects(){this.allProjects.forEach((e=>console.log(e.title)))}printItems(){var e=document.getElementById("projectHeader");this.getProject(e.textContent).items.forEach((e=>console.log(e.name)))}}).initHomePage()})();